import math

def calculate_weight(num, att1, att2):
    """熵值法计算权重
    num: 节点个数
    att1: 属性1
    att2: 属性2
    return : W0 :属性1的权重
             W1 :属性2的权重
    """

    x0_max = max(att1)
    x0_min = min(att1)
    x1_max = max(att2)
    x1_min = min(att2)

    x0 = []
    x1 = []
    for i in range(num):
        x0.append((att1[i]-x0_min)/(x0_max-x0_min))
        x1.append((att2[i]-x1_min)/(x1_max - x1_min))
    x0_sum = sum(x0)
    x1_sum = sum(x1)

    p0 = []
    p1 = []
    for i in range(num):
        p0.append(x0[i]/x0_sum)
        p1.append(x1[i]/x1_sum)

    ln_p0 = []
    ln_p1 = []
    for i in range(num):
        if p0[i] == 0:
            p0[i] = 1
        if p1[i] == 0:
            p1[i] = 1
        ln_p0.append(math.log(p0[i]))
        ln_p1.append(math.log(p1[i]))

    sum_p0 = []
    sum_p1 = []
    for i in range(num):
        sum_p0.append(p0[i]*ln_p0[i])
        sum_p1.append(p1[i]*ln_p1[i])

    E0 = -1/math.log(num)*sum(sum_p0)
    E1 = -1/math.log(num)*sum(sum_p1)
    # 权重的计算
    W0 = (1-E0)/(2-(E0+E1))
    W1 = (1-E1)/(2-(E0+E1))
    return W0, W1 

if __name__ == '__main__':
    lis1 = [0.17632528205034778, 0.22780087400406712, 0.5699770056577669, 0.611479053651165, 0.2126506499859826, 0.23072204424143333, 0.46346146475401295, 0.35338455094005927, 0.2217791296342855, 0.493951194511397, 0.2730275764794612, 0.4725745402982606, 0.6300443586620227, 0.667685448962899, 0.1679962712078433, 0.6160537778756495, 0.6456786178907187, 0.42888190491665246, 0.5551750789982662, 0.6002742784374309, 0.4100988356511486, 0.18844758076983453, 0.3644932215018165, 0.49045270100136007, 0.2696505458063868, 0.6619790356892639, 0.5929873055922179, 0.40666800068683473, 0.2474397004357985, 0.3877335944168561]
    lis2 = [1.324020541623322, 1.4588763589897407, 1.1991806759390145, 1.4209093704371272, 1.1821874267193433, 1.3597854569404741, 1.1474812350085493, 1.4084257463516607, 1.4932754349001112, 1.3399812853153867, 1.0843483897336967, 1.220893064595976, 1.21691755030736, 1.4201845722573827, 1.5541431450153707, 1.2145169312962545, 1.225119345808818, 1.0890384806411395, 1.3091664013435313, 1.387766607994599, 1.301149901882739, 1.0417227545840606, 1.2480873889518387, 1.2473137685041287, 1.3767596731482183, 1.3294007929737892, 1.2297769742356548, 1.0, 1.0211706273994978, 1.354860620305808]
    E1, E2 = calculate_weight(len(lis1),lis1, lis2)
    print(E1, E2)